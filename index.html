<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gesturetext Camera</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
      header {
        background: #333;
        color: #fff;
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      nav button {
        margin-left: 10px;
      }
      main {
        padding: 20px;
        text-align: center;
      }
      #cameraView {
        width: 80%;
        max-width: 600px;
        border: 2px solid #333;
        border-radius: 8px;
        margin-top: 20px;
        transform: scaleX(-1); /* Mirror the camera preview */
      }
      #outputText {
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }
      .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 400px;
      }
      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }
      .close:hover,
      .close:focus {
        color: black;
      }
      .dark-mode {
        background-color: #121212;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Gesturetext Camera</h1>
      <nav>
        <button id="aboutBtn">About Us</button>
        <button id="settingsBtn">Settings</button>
        <button id="darkModeBtn">Night Mode</button>
      </nav>
    </header>
    <main>
      <button id="startCameraBtn">Start Camera</button>
      <div id="cameraContainer">
        <video id="cameraView" autoplay playsinline></video>
        <canvas id="cameraCanvas" style="display: none"></canvas>
        <div id="outputText">Recognized text will appear here...</div>
      </div>
    </main>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <span class="close" id="aboutClose">&times;</span>
        <h2>About Us</h2>
        <p>
          This app demonstrates real-time gesture recognition using your camera
          and converts them into text.
        </p>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <span class="close" id="settingsClose">&times;</span>
        <h2>Settings</h2>
        <p>Settings can be configured here.</p>
      </div>
    </div>

    <script>
      const startCameraBtn = document.getElementById("startCameraBtn");
      const cameraView = document.getElementById("cameraView");
      const outputText = document.getElementById("outputText");
      const aboutBtn = document.getElementById("aboutBtn");
      const settingsBtn = document.getElementById("settingsBtn");
      const darkModeBtn = document.getElementById("darkModeBtn");
      const aboutModal = document.getElementById("aboutModal");
      const settingsModal = document.getElementById("settingsModal");
      const aboutClose = document.getElementById("aboutClose");
      const settingsClose = document.getElementById("settingsClose");
      let stream = null;
      let recognitionInterval = null;

      // Start/Stop Camera
      startCameraBtn.addEventListener("click", async () => {
        if (!stream) {
          try {
            stream = await navigator.mediaDevices.getUserMedia({ video: true });
            cameraView.srcObject = stream;
            startCameraBtn.textContent = "Stop Camera";

            // Simulated text recognition updates
            recognitionInterval = setInterval(() => {
              outputText.textContent =
                "Recognized text at " + new Date().toLocaleTimeString();
            }, 3000);
          } catch (err) {
            alert("Error accessing camera: " + err);
          }
        } else {
          // Stop the camera
          stream.getTracks().forEach((track) => track.stop());
          cameraView.srcObject = null;
          stream = null;
          startCameraBtn.textContent = "Start Camera";
          clearInterval(recognitionInterval);
          outputText.textContent = "Recognized text will appear here...";
        }
      });

      // About Us modal
      aboutBtn.addEventListener("click", () => {
        aboutModal.style.display = "block";
      });
      aboutClose.addEventListener("click", () => {
        aboutModal.style.display = "none";
      });

      // Settings modal
      settingsBtn.addEventListener("click", () => {
        settingsModal.style.display = "block";
      });
      settingsClose.addEventListener("click", () => {
        settingsModal.style.display = "none";
      });

      // Dark mode toggle
      darkModeBtn.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
      });

      // Close modals when clicking outside
      window.addEventListener("click", (event) => {
        if (event.target === aboutModal) {
          aboutModal.style.display = "none";
        }
        if (event.target === settingsModal) {
          settingsModal.style.display = "none";
        }
      });
    </script>
  </body>
</html>
