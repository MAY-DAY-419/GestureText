<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gesturetext Camera</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>Gesturetext Camera</h1>
      <nav>
        <button id="aboutBtn">About Us</button>
        <button id="settingsBtn">Settings</button>
        <button id="darkModeBtn">Night Mode</button>
      </nav>
    </header>
    <main>
      <button id="startCameraBtn">Start Camera</button>
      <div id="cameraContainer">
        <video id="cameraView" autoplay playsinline></video>
        <canvas id="cameraCanvas" style="display: none"></canvas>
        <div id="outputText">Recognized text will appear here...</div>
      </div>
    </main>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <span class="close" id="aboutClose">&times;</span>
        <h2>About Us</h2>
        <p>
          This app demonstrates real-time gesture recognition using your camera
          and converts them into text.
        </p>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <span class="close" id="settingsClose">&times;</span>
        <h2>Settings</h2>
        <p>Settings can be configured here.</p>
      </div>
    </div>

    <script>
      const startCameraBtn = document.getElementById("startCameraBtn");
      const cameraView = document.getElementById("cameraView");
      const outputText = document.getElementById("outputText");
      const aboutBtn = document.getElementById("aboutBtn");
      const settingsBtn = document.getElementById("settingsBtn");
      const darkModeBtn = document.getElementById("darkModeBtn");
      const aboutModal = document.getElementById("aboutModal");
      const settingsModal = document.getElementById("settingsModal");
      const aboutClose = document.getElementById("aboutClose");
      const settingsClose = document.getElementById("settingsClose");
      let stream = null;
      let recognitionInterval = null;

      // Start/Stop Camera
      startCameraBtn.addEventListener("click", async () => {
        if (!stream) {
          try {
            stream = await navigator.mediaDevices.getUserMedia({ video: true });
            cameraView.srcObject = stream;
            startCameraBtn.textContent = "Stop Camera";

            // Simulated text recognition updates
            recognitionInterval = setInterval(() => {
              outputText.textContent =
                "Recognized text at " + new Date().toLocaleTimeString();
            }, 3000);
          } catch (err) {
            alert("Error accessing camera: " + err);
          }
        } else {
          // Stop the camera
          stream.getTracks().forEach((track) => track.stop());
          cameraView.srcObject = null;
          stream = null;
          startCameraBtn.textContent = "Start Camera";
          clearInterval(recognitionInterval);
          outputText.textContent = "Recognized text will appear here...";
        }
      });

      // About Us modal
      aboutBtn.addEventListener("click", () => {
        aboutModal.style.display = "block";
      });
      aboutClose.addEventListener("click", () => {
        aboutModal.style.display = "none";
      });

      // Settings modal
      settingsBtn.addEventListener("click", () => {
        settingsModal.style.display = "block";
      });
      settingsClose.addEventListener("click", () => {
        settingsModal.style.display = "none";
      });

      // Dark mode toggle
      darkModeBtn.addEventListener("click", () => {
        document.body.classList.toggle("dark-mode");
      });

      // Close modals when clicking outside
      window.addEventListener("click", (event) => {
        if (event.target === aboutModal) {
          aboutModal.style.display = "none";
        }
        if (event.target === settingsModal) {
          settingsModal.style.display = "none";
        }
      });
    </script>
  </body>
</html>
